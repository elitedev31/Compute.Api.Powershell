version: 3.1.{build}
configuration: Release
platform: Any CPU

assembly_info:
  patch: true
  file: AssemblyInfo.*
  assembly_version: "{version}"
  assembly_file_version: "{version}"
  assembly_informational_version: "{version}"

build:
  project: PowershellModule\CloudCompute.PowershellModule.sln
  publish_nuget: true

after_build:
  - ps: .\DocumentPowerShell.ps1

environment:
  access_token:
    secure: O/sXyJYB0lM0WHQmuoG1LjfB/w9pwx8Pt3HmS13N9MXP7UqbY4/aJvJwemP0tlp2

on_success:
  - ps: | 
		git checkout "$env:APPVEYOR_REPO_BRANCH"			
		Add-Content "$env:USERPROFILE\.git-credentials" "https://$($env:access_token):x-oauth-basic@github.com`n"
		git remote add neworigin "$env:github_repo"
		git config --global user.email "anthony.p.shaw@gmail.com"
		git config --global user.name "Anthony Shaw"
		git config --global credential.helper store
		git config --global push.default simple		
		git add docs/
		git commit -m "Updated docs [skip appveyor]" --allow-empty		
		git push neworigin "$env:APPVEYOR_REPO_BRANCH"